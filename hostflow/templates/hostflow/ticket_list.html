{% extends 'hostflow/base.html' %}
{% block title %}Maintenance{% endblock %}
{% block page_title %}Maintenance Tickets{% endblock %}
{% block content %}
<div class="card">
  <table class="table table-hover mb-0">
    <thead class="table-light"><tr>
      <th>Title</th><th>Unit</th><th>Priority</th><th>Status</th><th>Date</th><th>View</th>
    </tr></thead>
    <tbody>
    {% for ticket in tickets %}
    <tr>
      <td>{{ ticket.title }}</td>
      <td>{{ ticket.unit }}</td>
      <td>
        {% if ticket.priority == 'high' %}<span class="badge bg-danger">High</span>
        {% elif ticket.priority == 'medium' %}<span class="badge bg-warning text-dark">Medium</span>
        {% else %}<span class="badge bg-secondary">Low</span>{% endif %}
      </td>
      <td>
        {% if ticket.status == 'open' %}<span class="badge bg-primary">Open</span>
        {% elif ticket.status == 'in_progress' %}<span class="badge bg-info text-dark">In Progress</span>
        {% else %}<span class="badge bg-success">Resolved</span>{% endif %}
      </td>
      <td>{{ ticket.created_at|date:"d M Y" }}</td>
      <td><a href="{% url 'ticket_detail' ticket.pk %}" class="btn btn-outline-primary btn-sm">View</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center text-muted py-4">No tickets yet.</td></tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
